# Быстрый старт

## Запуск через Docker (рекомендуется)

1. **Клонировать репозиторий**
```bash
git clone https://github.com/coder-od1no4ka/cryptobotcompetition.git
cd cryptobotcompetition
```

2. **Запустить проект**
```bash
docker-compose up -d
```

3. **Открыть в браузере**
```
http://localhost:3000
```

4. **Остановить проект**
```bash
docker-compose down
```

## Локальный запуск

1. **Установить зависимости**
```bash
npm install
```

2. **Запустить MongoDB** (должен быть доступен на `localhost:27017`)

3. **Собрать проект**
```bash
npm run build
```

4. **Запустить сервер**
```bash
npm start
# или для разработки:
npm run dev
```

5. **Открыть в браузере**
```
http://localhost:3000
```

## Первые шаги

1. **Создать пользователя**
   - Перейдите на вкладку "Мой профиль"
   - Введите User ID (например, `user1`)
   - Нажмите "Загрузить профиль"
   - Пополните баланс (например, 1000)

2. **Создать аукцион**
   - Перейдите на вкладку "Создать аукцион"
   - Заполните форму:
     - Название: "Тестовый аукцион"
     - Всего товаров: 10
     - Товаров в раунде: 3
     - Длительность раунда: 60 секунд
     - Минимальная ставка: 1
     - Anti-sniping окно: 10 секунд
   - Нажмите "Создать аукцион"

3. **Сделать ставку**
   - Перейдите на вкладку "Аукционы"
   - Найдите созданный аукцион
   - Введите сумму ставки
   - Нажмите "Ставка"

4. **Запустить ботов для тестирования**
   - Перейдите на вкладку "Боты"
   - Введите ID аукциона
   - Настройте количество ботов (например, 5)
   - Настройте интервал (например, 1000мс)
   - Нажмите "Запустить ботов"

## API примеры

### Создать пользователя
```bash
curl -X POST http://localhost:3000/api/users/user1 \
  -H "Content-Type: application/json" \
  -d '{"username": "Test User"}'
```

### Пополнить баланс
```bash
curl -X POST http://localhost:3000/api/users/user1/deposit \
  -H "Content-Type: application/json" \
  -d '{"amount": 1000}'
```

### Создать аукцион
```bash
curl -X POST http://localhost:3000/api/auctions \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Test Auction",
    "totalItems": 10,
    "itemsPerRound": 3,
    "roundDuration": 60,
    "minBid": 1,
    "antiSnipingWindow": 10
  }'
```

### Запустить аукцион
```bash
curl -X POST http://localhost:3000/api/auctions/{auctionId}/start
```

### Разместить ставку
```bash
curl -X POST http://localhost:3000/api/auctions/{auctionId}/bid \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "user1",
    "amount": 50
  }'
```

### Получить активные аукционы
```bash
curl http://localhost:3000/api/auctions/active
```

## Нагрузочное тестирование

Запустить скрипт нагрузочного тестирования:

```bash
npm run load-test 10 1000 60000
```

Параметры:
- `10` - количество ботов
- `1000` - интервал между ставками (мс)
- `60000` - длительность теста (мс)

## Проверка работы

1. **Проверить балансы**: Убедитесь, что балансы пользователей корректны
2. **Проверить транзакции**: Посмотрите историю транзакций пользователей
3. **Проверить победителей**: После завершения раунда проверьте список победителей
4. **Проверить возвраты**: Убедитесь, что проигравшие получили возврат средств

## Troubleshooting

### MongoDB не подключается
- Убедитесь, что MongoDB запущен
- Проверьте строку подключения в `.env`
- Для Docker: проверьте, что контейнер MongoDB запущен

### Порт 3000 занят
- Измените порт в `.env`: `PORT=3001`
- Или остановите процесс, использующий порт 3000

### Ошибки при сборке
- Убедитесь, что используется Node.js 20+
- Удалите `node_modules` и `package-lock.json`, затем выполните `npm install`

### Боты не делают ставки
- Убедитесь, что аукцион активен
- Проверьте балансы ботов
- Проверьте логи сервера

